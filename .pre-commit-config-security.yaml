repos:
  # ============================================================================
  # BASIC CODE QUALITY (NON-FORMATTING)
  # ============================================================================
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: check-added-large-files
        args: ["--maxkb=102400"] # 100MB = 102400KB
      - id: check-json
        exclude: '(package-lock\.json$|yarn\.lock$|pnpm-lock\.yaml$|cdk\.context\.json$|\.vscode/|\.idea/|\.terraform/)'
      - id: check-yaml
      - id: debug-statements
      - id: detect-private-key
        exclude: '(\.terraform/|node_modules/|\.venv/|venv/|\.virtualenv/|vendor/|Pods/)'
      - id: name-tests-test
      - id: no-commit-to-branch
        args: ["--branch", "main", "--branch", "master"]

  # ============================================================================
  # PYTHON SECURITY
  # ============================================================================
  - repo: https://github.com/Lucas-C/pre-commit-hooks-safety
    rev: v1.4.2
    hooks:
      - id: python-safety-dependencies-check
        files: requirements.*\.txt$
        exclude: pyproject\.toml

  # ============================================================================
  # SECURITY SCANNING
  # ============================================================================
  - repo: https://github.com/awslabs/automated-security-helper
    rev: v3.1.10
    hooks:
      - id: ash-simple-scan

  - repo: https://github.com/awslabs/ferret-scan
    rev: v1.4.0
    hooks:
      - id: ferret-scan
        name: Ferret Scan Security Check
        args:
          [
            "--pre-commit-mode",
            "--confidence",
            "medium,high",
            "--checks",
            "EMAIL,INTELLECTUAL_PROPERTY,IP_ADDRESS,SECRETS,SOCIAL_MEDIA",
            "--config",
            ".devsecops/ferret-scan.yaml",
          ]
        files: '\.(go|java|json|md|py|sh|sql|txt|xml|yaml|yml)$'
        # Note: .js files temporarily removed from files pending performance fix
        exclude: '(^\.git/|\.ash/|\.cache/|\.devsecops/|\.dsr/|\.idea/|\.kiro/|\.venv/|\.virtualenv/|__pycache__/|\.pytest_cache/|\.mypy_cache/|\.ruff_cache/|\.tox/|\.terraform/|\.next/|\.nuxt/|\.svelte-kit/|\.turbo/|\.docusaurus/|_build/|site/|bin/|cdk\.out/|dist/|node_modules/|\.pnpm-store/|\.yarn/|bower_components/|\.vscode/|out/|\.output/|\.nyc_output/|test-results/|reports/|tmp/|temp/|logs/|setup\.sh|vendor/|Pods/|venv/|test_|_test\.|^README\.md$|\.DS_Store$|Thumbs\.db$|.*\.pyc$|.*\.pyo$|.*\.swp$|.*\.swo$|.*\.log$|package-lock\.json$|yarn\.lock$|pnpm-lock\.yaml$|poetry\.lock$|Pipfile\.lock$|Gemfile\.lock$|\.terraform\.lock\.hcl$|terraform\.tfstate$|cdk\.context\.json$)'
        pass_filenames: true

  # ============================================================================
  # INFRASTRUCTURE SECURITY
  # ============================================================================
  - repo: https://github.com/aws-cloudformation/cfn-lint
    rev: v1.44.0
    hooks:
      - id: cfn-lint
        exclude: ^\.*

  - repo: https://github.com/antonbabenko/pre-commit-terraform
    rev: v1.105.0
    hooks:
      - id: terraform_tflint
        files: '\.tf$'
        verbose: true
        args:
          - --args=--format=compact --force

  # ============================================================================
  # LICENSE COMPLIANCE
  # ============================================================================
  - repo: https://github.com/FHPythonUtils/LicenseCheck
    rev: "2025.1.0"
    hooks:
      - id: licensecheck
        name: License Compliance Check
        args: ["--format", "ansi", "--zero"]
        # Note: licensecheck will automatically detect pyproject.toml or requirements.txt
        # Configure allowed/blocked licenses in licensecheck.toml
